<div id="custom_rating" class="<%= 'not-active' if disable_rating == true%>">
  <fieldset class="rating" style="margin-right: 5px;">
    <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star5" name="<%= add_class_rating.gsub(" ","") %>_rating" value="5">
    <label class = "full" for="<%= add_class_rating.gsub(" ","") %>_star5" title="Awesome - 5 stars"></label>
    <% if show_half_star == true %>
      <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star4half" name="<%= add_class_rating.gsub(" ","") %>_rating" value="4.5">
      <label class="half" for="<%= add_class_rating.gsub(" ","") %>_star4half" title="Pretty good - 4.5 stars"></label>
    <% end %>
    <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star4" name="<%= add_class_rating.gsub(" ","") %>_rating" value="4">
    <label class = "full" for="<%= add_class_rating.gsub(" ","") %>_star4" title="Pretty good - 4 stars"></label>
    <% if show_half_star == true %>
      <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star3half" name="<%= add_class_rating.gsub(" ","") %>_rating" value="3.5">
      <label class="half" for="<%= add_class_rating.gsub(" ","") %>_star3half" title="Meh - 3.5 stars"></label>
    <% end %>
    <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star3" name="<%= add_class_rating.gsub(" ","") %>_rating" value="3">
    <label class = "full" for="<%= add_class_rating.gsub(" ","") %>_star3" title="Meh - 3 stars"></label>
    <% if show_half_star == true %>
      <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star2half" name="<%= add_class_rating.gsub(" ","") %>_rating" value="2.5">
      <label class="half" for="<%= add_class_rating.gsub(" ","") %>_star2half" title="Kinda bad - 2.5 stars"></label>
    <% end %>
    <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star2" name="<%= add_class_rating.gsub(" ","") %>_rating" value="2">
    <label class = "full" for="<%= add_class_rating.gsub(" ","") %>_star2" title="Kinda bad - 2 stars"></label>
    <% if show_half_star == true %>
      <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star1half" name="<%= add_class_rating.gsub(" ","") %>_rating" value="1.5">
      <label class="half" for="<%= add_class_rating.gsub(" ","") %>_star1half" title="Meh - 1.5 stars"></label>
    <% end %>
    <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_star1" name="<%= add_class_rating.gsub(" ","") %>_rating" value="1">
    <label class = "full" for="<%= add_class_rating.gsub(" ","") %>_star1" title="Sucks big time - 1 star"></label>
    <% if show_half_star == true %>
      <input type="radio" class="<%= add_class_rating.gsub(" ","") %>" id="<%= add_class_rating.gsub(" ","") %>_starhalf" name="<%= add_class_rating.gsub(" ","") %>_rating" value="0.5">
      <label class="half" for="<%= add_class_rating.gsub(" ","") %>_starhalf" title="Sucks big time - 0.5 stars"></label>
    <% end %>
  </fieldset>
</div>

<script>
  $("#custom_rating fieldset.rating input.<%= add_class_rating.gsub(" ","") %>").change(function(){
    point = $(this).closest("fieldset.rating").find('input[name="<%= add_class_rating.gsub(" ","") %>_rating"]:checked').val();
    $(this).closest("#point_selected").find("input#rating_<%= add_class_rating.gsub(" ","") %>").val(point);
  });
  if (<%= default_checked %> > 0) {
    $("#<%= add_class_rating.gsub(" ","") %>_<%= parse_id_rating(default_checked) %>").attr("checked", true);
  }
</script>